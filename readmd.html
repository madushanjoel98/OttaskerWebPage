<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>GitHub-like Markdown Viewer</title>
        <!-- GitHub Markdown CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css" />
        <!-- Highlight.js CSS for code blocks -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css" />
        <style>
            body {
                display: flex;
                justify-content: center;
                padding: 20px;
            }
            .markdown-body {
                width: 100%;
                max-width: 800px;
            }
        </style>
    </head>
    <body>
        <article class="markdown-body" id="content">
            <!-- Rendered markdown will appear here -->
        </article>
        <!-- Marked.js for parsing markdown -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.18/marked.min.js"></script>
        <!-- Highlight.js for syntax highlighting -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                // Change the file name if needed (e.g., 'README.md')
                fetch("https://raw.githubusercontent.com/madushanjoel98/flask_template/refs/heads/main/README.md")
                    .then(response => response.text())
                    .then(md => {
                        const renderer = new marked.Renderer();
                        marked.setOptions({
                            renderer: renderer,
                            highlight: function (code, lang) {
                                if (hljs.getLanguage(lang)) {
                                    return hljs.highlight(code, { language: lang }).value;
                                }
                                return code;
                            },
                            langPrefix: "hljs language-", // highlight.js css expects a top-level 'hljs' class.
                            breaks: true,
                        });
                        document.getElementById("content").innerHTML = marked.parse(md);
                    })
                    .catch(err => {
                        document.getElementById("content").innerHTML = "<p>Error loading markdown file.</p>";
                        console.error(err);
                    });
            });
        </script>
    </body>
</html>